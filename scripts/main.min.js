const header = document.querySelector(".header"),
  experience = document.querySelector(".experience"),
  headerHeight = header.offsetHeight,
  experienceHeight = experience.offsetHeight;
  window.addEventListener("scroll", () => {
    let e = window.scrollY;
    e > 90
      ? header.classList.add("header--scrolling")
      : header.classList.remove("header--scrolling"),
      // Обработка формы контактов
      document.getElementById('contact-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const form = this;
        const submitBtn = form.querySelector('.form__submit');
        const submitText = form.querySelector('.form__submit-text');
        const submitLoading = form.querySelector('.form__submit-loading');
        const successMessage = form.querySelector('.form__message--success');
        const errorMessage = form.querySelector('.form__message--error');
        
        // Скрыть предыдущие сообщения
        successMessage.style.display = 'none';
        errorMessage.style.display = 'none';
        
        // Показать состояние загрузки
        submitText.style.display = 'none';
        submitLoading.style.display = 'inline';
        submitBtn.disabled = true;
        
        // Отправить форму
        fetch(form.action, {
          method: 'POST',
          body: new FormData(form),
          headers: {
            'Accept': 'application/json'
          }
        })
        .then(response => {
          if (response.ok) {
            successMessage.style.display = 'block';
            form.reset();
          } else {
            throw new Error('Ошибка отправки');
          }
        })
        .catch(error => {
          errorMessage.style.display = 'block';
        })
        .finally(() => {
          // Восстановить кнопку
          submitText.style.display = 'inline';
          submitLoading.style.display = 'none';
          submitBtn.disabled = false;
        });
      });

      // Активные табы в хедере
      function updateActiveTab() {
        const menuLinks = document.querySelectorAll('.menu__link');
        const sections = document.querySelectorAll('section[id]');
        
        // Удаляем активный класс со всех ссылок
        menuLinks.forEach(link => link.classList.remove('menu-active'));
        
        // Находим текущую секцию
        let currentSection = '';
        const scrollPos = window.scrollY + 180;
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.offsetHeight;
          
          if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
            currentSection = section.id;
          }
        });
        
        // Добавляем активный класс к соответствующей ссылке
        if (currentSection) {
          const activeLink = document.querySelector(`.menu__link[href*="#${currentSection}"]`);
          if (activeLink) {
            activeLink.classList.add('menu-active');
          }
        }
      }
      
      // Обновляем активный таб при скролле
      window.addEventListener('scroll', updateActiveTab);
      
      // Обновляем активный таб при загрузке страницы
      document.addEventListener('DOMContentLoaded', updateActiveTab);
  });
const menuBtn = document.querySelector(".butger-btn"),
  menuWrap = document.querySelector(".menu"),
  menuLink = document.querySelectorAll(".menu__link"),
  headerSite = document.querySelector(".header"),
  body = document.querySelector(".body"),
  toggleMenu = () => {
    menuWrap.classList.toggle("menu-active"),
      menuBtn.classList.toggle("menu-active"),
      headerSite.classList.toggle("menu-active"),
      menuWrap.classList.contains("menu-active")
        ? (menuBtn.setAttribute("aria-laberl", "close menu"),
          menuBtn.setAttribute("aria-expanded", "true"))
        : (menuBtn.setAttribute("aria-laberl", "open menu"),
          menuBtn.setAttribute("aria-expanded", "false"));
  };
menuBtn.addEventListener("click", () => {
  toggleMenu(body.classList.toggle("menu-active"));
}),
  menuLink.forEach((e) => {
    e.addEventListener("click", () => {
      toggleMenu(body.classList.remove("menu-active"));
    });
  });
for (let e = 0; e < menuLink.length; e++)
  menuLink[e].addEventListener("click", function () {
    for (let e = 0; e < menuLink.length; e++)
      menuLink[e].classList.remove("menu-active");
    this.classList.add("menu-active");
  });
document.addEventListener("DOMContentLoaded", () => {
  if (window.innerWidth > 1380) {
    new Swiper(".swiper", {
      autoplay: { delay: 0, disableOnInteraction: !1 },
      slidesPerView: 4,
      spaceBetween: 0,
      speed: 4e3,
      loop: !1,
      allowTouchMove: !1,
    });
  }
});
const tabBtn = document.querySelectorAll(".tab__btn"),
  tabWrapper = document.querySelectorAll(".tab__wrapper");
function open(e) {
  const t = e.currentTarget,
    n = t.dataset.button;
  tabBtn.forEach(function (e) {
    e.classList.remove("tab__btn--active");
  }),
    t.classList.add("tab__btn--active"),
    tabWrapper.forEach(function (e) {
      e.classList.remove("tab__wrapper--active");
    }),
    document.querySelector(`#${n}`).classList.add("tab__wrapper--active");
}
tabBtn.forEach(function (e) {
  e.addEventListener("click", open);
});
